#Client Profile

Understanding who the customer is is a critical step in generating hypotheses and moving on with the analysis. To do this, we explored the data and found some interesting information shared below:

```{r echo=FALSE, warning=FALSE, error=FALSE, include=FALSE}

library(plotly)
library(ggplot2)

load('processed_files/frame_no_transaction')

```

##Birth Date

The majority of the bank's clients were born after the 40s.
```{r fig.cap='Distribution of birth date', echo=FALSE, warning=FALSE, error=FALSE}


p <- ggplot(data = frame_no_transaction) +
  geom_histogram(mapping = aes(x  = birth_date),bins = 20, )  +
  labs(x='Birth Date',y = '')


if (pdf){
  p
} else {
ggplotly(p)
}

```

##Gender

There is a close distribution between male and female clients in the bank.
```{r fig.cap='Gender Distribution', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = frame_no_transaction) +
  geom_bar(mapping = aes(x  = gender)) +
  labs(x='Gender',y = '')


if (pdf){
  p
} else {
ggplotly(p)
}
```

##Number of Dependents

Most of the bank's clients don't have any dependents on their bank and account and the ones that do, only have one dependant. If having dependents is a revenue stream of the bank, this should be taken into consideration as an opportunity to grow.

```{r fig.cap='Number of Dependents', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = frame_no_transaction) +
  geom_bar(mapping = aes(x  = dependents)) +
  labs(x='dependents',y = '')


if (pdf){
  p
} else {
ggplotly(p)
}
```

##Account creation by time

There was a sharp decrease in accounts created after 1994 and since then the bank has been recovering from it.

Recommendation: investigate the root causes on this decrease, this way the bank can become aware of what impacts it's business. 

```{r fig.cap='Distribution of account creation by time', echo=FALSE, warning=FALSE, error=FALSE}


p <- ggplot(data = frame_no_transaction) +
  geom_histogram(mapping = aes(x  = date.x, fill = gender),bins = 20, )  +
  labs(x='Creation date',y = '')

if (pdf){
  p
} else {
ggplotly(p)
}


```

##Age at account creation

The youngest clients that the bank manage to capitate are on their late teens when they create their bank account and there is a sharp decrease of account creation after the 60s.

Having young clients is great for the business in the long term, but they are usually not as profitable as older clients (who already have higher incomes and do more bank transactions). It is suggested to seek greater penetration in the elderly market.


```{r fig.cap='Distribution of age at account creation', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = mutate(frame_no_transaction,age_at_creation = (frame_no_transaction$date.x - frame_no_transaction$birth_date) / 365)) +
  geom_histogram(mapping = aes(x  = age_at_creation, fill = gender),bins = 10 )  +
  labs(x='Age at account creation',y = '')+
  scale_x_continuous()

if (pdf){
  p
} else {
ggplotly(p)
}


```

##Regions

There is no concentration of clients in any particular region in the country.

Given this scenario, a possible strategy would be to focus on some more profitable regions and gain space in them, then expand and gain more customers in all regions.

```{r fig.cap='Clients by Region', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = frame_no_transaction) +
  geom_bar(mapping = aes(x  = region)) +
  labs(x='Region',y = '')+
  theme(axis.text.x = element_text(size = 6))


if (pdf){
  p
} else {
ggplotly(p)
}
```

Looking closely to number of inhabitants in each region and the number of clients we see that there is a major opportunity for improvement in South Moravia.

```{r fig.cap='Clients by district', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(
  data = frame_no_transaction %>% group_by(district_name) %>% summarise(clients = n(), inhabitants = mean(inhabitants), ratio_urban = mean(`ratio of urban inhabitants`), region = first(region)) %>% dplyr::filter(district_name !='Hl.m. Praha')
            ) +
  geom_point(mapping = aes(x  = clients, y = inhabitants/1e3, name = district_name, size = ratio_urban, color = region ),
             alpha = 0.6) + 
  geom_smooth(method='lm',aes(x  = clients, y = inhabitants/1e3) ) +
  labs(x='Clients',y = 'Inhabitants (thousands)')

if (pdf){
  p
} else {
ggplotly(p)
}
```





##Frequency of statements

Almost all clients prefer to have their bank statements sent to them monthly. 

```{r fig.cap='Frequency of statements', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = frame_no_transaction) +
  geom_bar(mapping = aes(x  = frequency)) +
  labs(x='frequency',y = '')


if (pdf){
  p
} else {
ggplotly(p)
}

```

No bank client born before the 30s choose to have its bank statement sent after transaction or weekly.

```{r fig.cap='Frequency of statements by age', echo=FALSE, warning=FALSE, error=FALSE}

p <- ggplot(data = frame_no_transaction) +
  geom_boxplot(mapping = aes(x  = frequency, y = birth_date, fill = frequency)) +
  labs(x='frequency',y = '')


if (pdf){
  p
} else {
ggplotly(p)
}

```












